jQuery(function(e){e("body.no-js").removeClass("no-js"),e(".entry-content .flexslider:not(.metaslider .flexslider), #metaslider-demo.flexslider, .gallery-format-slider").flexslider({namespace:"flex-vantage-"}),"undefined"!=typeof e.fn.fitVids&&e(".entry-content, .entry-content .panel, .entry-video, .woocommerce #main, #masthead-widgets, #header-sidebar").fitVids({ignore:".tableauViz"});var t=e("body").hasClass("so-vantage-mobile-device"),n=e("body").hasClass("so-vantage-customizer-preview"),i=e("nav.site-navigation.primary").hasClass("mobile-navigation");(!t&&e("#scroll-to-top").hasClass("scroll-to-top")||n||t)&&(e(window).scroll(function(){e(window).scrollTop()>150?e("#scroll-to-top").addClass("displayed"):e("#scroll-to-top").removeClass("displayed")}),e("#scroll-to-top").click(function(){return e("html, body").animate({scrollTop:"0px"}),!1})),e(".vantage-carousel").each(function(){var t=e(this),n=t.closest(".widget"),i=n.find(".widget-title"),a=t.find(".carousel-entry"),s=a.eq(0),o=0,r=1,d=!1,l=!1,c=a.length,u=s.width()+parseInt(s.css("margin-right")),f=function(){o<0&&(o=0),o>=t.find(".carousel-entry").length-1&&(o=t.find(".carousel-entry").length-1,d||l||(d=!0,r++,t.append('<li class="loading"></li>'),e.get(t.data("ajax-url"),{query:t.data("query"),action:"vantage_carousel_load",paged:r},function(n,i){var a=e(n.html),s=a.find(".carousel-entry").appendTo(t).hide().fadeIn().length;c+=s,0===s?(l=!0,t.find(".loading").fadeOut(function(){e(this).remove()})):t.find(".loading").remove(),d=!1}))),t.css("transition-duration","0.45s"),t.css("margin-left",-(u*o)+"px")};i.find("a.previous").click(function(){return o-=1,f(),!1}),i.find("a.next").click(function(){return o+=1,f(),!1});var m,h=!1,g=0,v=0,p=0,y=0;t.swipe({excludedElements:"",triggerOnTouchEnd:!0,threshold:75,swipeStatus:function(e,t,n,i,a,s,r){if("start"===t)v=-(u*o),y=(new Date).getTime(),clearInterval(m);else if("move"===t){"left"===n&&(i*=-1),w(v+i);var d=(new Date).getTime(),l=(d-y)/1e3;p=(i-g)/l,y=d,g=i}else if("end"===t)if(h=!0,"left"===n&&(i*=-1),Math.abs(p)>400){p*=.1;var c=(new Date).getTime(),C=0;m=setInterval(function(){var e=((new Date).getTime()-c)/1e3;C+=p*e;var t=v+i+C,a=30,s=Math.abs(p)-a<0;"left"===n?p+=a:p-=a,!s&&w(t)||(clearInterval(m),b())},20)}else b();else"cancel"===t&&f()}});var w=function(e){return e<50&&e>-(u*c)&&(t.css("transition-duration","0s"),t.css("margin-left",e+"px"),!0)},b=function(){var e=parseInt(t.css("margin-left"));o=Math.abs(Math.round(e/u)),f()};t.on("click","li.carousel-entry .thumbnail a",function(e){h&&(e.preventDefault(),h=!1)})}),e(".menu-item").children("a").focus(function(){e(this).parents("li").addClass("focus")}),e(".menu-item").children("a").click(function(){e(this).parents("li").removeClass("focus")}),e(".menu-item").children("a").focusout(function(){e(this).parents("li").removeClass("focus")}),e("#header-sidebar .widget_nav_menu","#masthead-widgets .widget_nav_menu").on("mouseenter","ul.menu li",function(){var t=e(this),n=t.find("> ul");n.finish().css("opacity",0).hide().slideDown(200).animate({opacity:1},{queue:!1,duration:200})}).on("mouseleave","ul.menu li",function(){var t=e(this),n=t.find("> ul");n.finish().fadeOut(150)});var a=!1;e(document).click(function(){a||e("#search-icon form").fadeOut(250)});var s=navigator.userAgent.toLowerCase();if(e(document).on("click keydown","#search-icon-icon",function(t){if("keydown"==t.type){if(13!==t.keyCode)return;t.preventDefault()}var n=e(this).parent();n.find("form").fadeToggle(250),s.match(/(iPad|iPhone|iPod)/i)?n.find('input[type="search"]').focus():setTimeout(function(){n.find('input[type="search"]').focus()},300)}),e(document).keyup(function(t){27==t.keyCode&&e("#search-icon form").fadeOut(250)}),e(document).on("mouseenter","#search-icon",function(){a=!0}).on("mouseleave","#search-icon",function(){a=!1}),e(window).resize(function(){e("#search-icon .searchform").each(function(){e(this).width(e(this).closest(".full-container").width())})}).resize(),e("nav.site-navigation.primary").hasClass("use-sticky-menu")&&!t||(t||n)&&i){var o,r,d=e("nav.site-navigation.primary"),l=e("body.mega-menu-primary.layout-boxed").length,c=function(){d.hasClass("sticky")||(o=d.offset().top,r=d.width());var t=0;e("body").hasClass("admin-bar")&&(t="absolute"==e("#wpadminbar").css("position")?0:e("#wpadminbar").outerHeight());var n=parseInt(o-e(window).scrollTop());n<t?(d.addClass("sticky"),e("body").addClass("sticky-menu"),e("#masthead").css("padding-bottom",d.innerHeight()),l&&d.width(r)):d.hasClass("sticky")&&(e("#masthead").css("padding-bottom",0),d.removeClass("sticky"),e("body").removeClass("sticky-menu"),l&&d.width("auto"))};e(window).scroll(c).resize(c),c()}e('body.layout-full #main-slider[data-stretch="true"]').each(function(){var t=e(this);t.find(">div").css("max-width","100%"),t.find(".slides li").each(function(){var t=e(this),n=t.find("img.ms-default-image").eq(0);n.length||(n=t.find("img").eq(0)),t.css("background-image","url("+n.attr("src")+")"),n.css("visibility","hidden"),t.wrapInner('<div class="full-container"></div>');var i=t.find("a");i.length&&(t.mouseover(function(){t.css("cursor","hand")}),t.mouseout(function(){t.css("cursor","pointer")}),t.click(function(t){t.preventDefault();var n=e(t.target),a=n.is("a")?n:i;window.open(a.attr("href"),a.attr("target"))}))})}),e("#header-sidebar").each(function(){var t=e(this),n=0;if(t.find("> aside").each(function(){var e=(t.outerHeight()-t.find("> aside").outerHeight())/2;e>n&&(n=e)}),n>15?t.css({"padding-top":n,"padding-bottom":n}):(n=-n+15,e("#masthead .logo > *").css({"padding-top":n,"padding-bottom":n})),t.hasClass("no-logo-overlay")){var i=function(){t.closest("#masthead").removeClass("force-responsive");var n=e("#masthead .logo").find("h1, img");t.offset().left<n.offset().left+n.outerWidth()&&t.closest("#masthead").addClass("force-responsive")};e(window).resize(i),i()}}),e("#colophon #footer-widgets .widget_nav_menu a").each(function(){var t=(e(this),e(this).parents(".sub-menu").length),n=10*t+"px";e(this).css("padding-left",n)})}),function(e){e(window).load(function(){var t=e(".masthead-logo-in-menu").height(),n=e(".masthead-logo-in-menu .menu > .menu-item").outerHeight(),i=e(".masthead-logo-in-menu .logo").outerHeight();t>n&&e(".masthead-logo-in-menu .menu > .menu-item").css("margin-top",(t-n)/2),t>i&&e(".masthead-logo-in-menu .logo").css("margin-top",(t-i)/2)})}(jQuery);